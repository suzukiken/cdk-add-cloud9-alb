+++
title = "ALBにCloud9へのhttpアクセスルールを設定する"
category = "ALB"
tags = ["ALB", "Cloud9"]
date = "2021-07-05"
update = "2021-07-05"
+++

Cloud9でReactなんかを使ってウェブサイトを作っている時に、当然そのサイトをブラウザでプレビューしながら作りたいわけだけど、毎度接続先のURLが変わるのが面倒臭いので、決まったURLで接続したいと思うようになる。さらにそのURLはhttpで始まる非SSLの接続では開発に支障があることも多いので、SSLを使いたい。

では、それをするのにどうしたらいいかだけど、たぶん一番楽な方法は、AWSのロードバランサーを使ってしまう方法で、実際に自分はそうしている。

とはいえ、ALBの設定は案外面倒なものではある。例えばCloud9のインスタンスはよく捨てて新調するのだが、その度にALBのルールを設定するのがめんどくさいし、設定に必要なことを忘れてしまって、あーでもないこーでもないと無駄な時間を費やしてしまうこともある。例えばポート443と80でそれぞれに同じルールを作るなんてめんどくさいことだし、セキュリティーグループの設定を誤ってサイトにアクセスできなかったりなんて、本当に生産性ゼロの無駄な時間でしかない。

そういうわけでそういった諸々のことをいちいちやらずに済むようにCDKを使うようにしようと思って作ったのが[このリポジトリ](https://github.com/suzukiken/cdk-add-cloud9-alb)のスタックです。

ちなみにALBは立ち上げておくだけで月額17ドルぐらいかかるので、個人的にはたかだかCloud9の開発のために使うには実にもったいないと感じる金額だ。
だから本当はもっといい方法を見つけておきたいとは思っている。例えばCloudFrontやAPI Gatewayを経由してCloud9のEC2インスタンスを公開するとか、できないだろうかなんてことを考えている。

とはいえそのために1日とかかけるなんて逆に時間が勿体無くて、今の所ALBを使っている次第です。

